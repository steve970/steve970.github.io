!function(t){function e(){h=setInterval(a,500),N=!0}function n(){clearInterval(h),N=!1}function a(){g=i()-v,u(),w&&g===w&&(x.callback(),x.repeat&&(w+=x.duration),x.countdown&&(x.countdown=!1))}function u(){var t=g;x.countdown&&w>0&&(t=w-g),b[y](s(t)),b.data("seconds",t)}function r(){b.on("focus",function(){l()}),b.on("blur",function(){var t,e=b[y]();e.indexOf("sec")>0?g=Number(e.replace(/\ssec/g,"")):e.indexOf("min")>0?(e=e.replace(/\smin/g,""),t=e.split(":"),g=Number(60*t[0])+Number(t[1])):e.match(/\d{1,2}:\d{2}:\d{2}/)&&(t=e.split(":"),g=Number(3600*t[0])+Number(60*t[1])+Number(t[2])),f()})}function i(){return Math.round((new Date).getTime()/1e3)}function o(t){var e,n=0,a=Math.floor(t/60);return t>=3600&&(n=Math.floor(t/3600)),t>=3600&&(a=Math.floor(t%3600/60)),10>a&&n>0&&(a="0"+a),e=t%60,10>e&&(a>0||n>0)&&(e="0"+e),{hours:n,minutes:a,seconds:e}}function s(t){var e="",n=o(t);if(x.format){var a=[{identifier:"%h",value:n.hours,pad:!1},{identifier:"%m",value:n.minutes,pad:!1},{identifier:"%s",value:n.seconds,pad:!1},{identifier:"%H",value:parseInt(n.hours),pad:!0},{identifier:"%M",value:parseInt(n.minutes),pad:!0},{identifier:"%S",value:parseInt(n.seconds),pad:!0}];e=x.format,a.forEach(function(t){e=e.replace(new RegExp(t.identifier.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t.pad&&t.value<10?"0"+t.value:t.value)})}else e=n.hours?n.hours+":"+n.minutes+":"+n.seconds:n.minutes?n.minutes+":"+n.seconds:n.seconds;return e}function c(t){if(!isNaN(Number(t)))return t;var e=t.match(/\d{1,2}h/),n=t.match(/\d{1,2}m/),a=t.match(/\d{1,2}s/),u=0;return t=t.toLowerCase(),e&&(u+=3600*Number(e[0].replace("h",""))),n&&(u+=60*Number(n[0].replace("m",""))),a&&(u+=Number(a[0].replace("s",""))),u}function d(){N||(u(),e(),b.data("state",M))}function l(){N&&(n(),b.data("state",_))}function f(){N||(v=i()-g,e(),b.data("state",M))}function p(){v=i(),g=0,b.data("seconds",g),b.data("state",I),w=x.duration}function m(){n(),b.data("plugin_"+k,null),b.data("seconds",null),b.data("state",null),b[y]("")}var h,v,b,g=0,N=!1,w=null,x={seconds:0,editable:!1,restart:!1,duration:null,callback:function(){alert("Time up!"),n()},repeat:!1,countdown:!1,format:null},y="html",I="stopped",M="running",_="paused",j=function(e,n){var a;x=t.extend(x,n),b=t(e),g=x.seconds,v=i()-g,b.data("seconds",g),b.data("state",I),a=b.prop("tagName").toLowerCase(),("input"===a||"textarea"===a)&&(y="val"),x.duration&&(w=x.duration=c(x.duration),g>=w&&(w=g+w)),x.editable&&r()};j.prototype={start:function(){d()},pause:function(){l()},resume:function(){f()},reset:function(){p()},remove:function(){m()}};var k="timer";t.fn[k]=function(e){return e=e||"start",this.each(function(){t.data(this,"plugin_"+k)instanceof j||t.data(this,"plugin_"+k,new j(this,e));var n=t.data(this,"plugin_"+k);"string"==typeof e&&"function"==typeof n[e]&&n[e].call(n),"object"==typeof e&&n.start.call(n)})}}(jQuery);